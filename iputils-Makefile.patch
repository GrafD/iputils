--- Makefile.orig	2002-11-09 04:01:11.000000000 +0100
+++ Makefile	2004-01-27 13:15:21.861770832 +0100
@@ -1,5 +1,4 @@
 # Path to parent kernel include files directory
-KERNEL_INCLUDE=/usr/src/linux/include
 LIBC_INCLUDE=/usr/include
 
 DEFINES= 
@@ -17,11 +16,6 @@
   GLIBCFIX=-Iinclude-glibc -include include-glibc/glibc-bugs.h
 endif
 
-ifeq ($(KERNEL_INCLUDE)/linux/pfkeyv2.h,$(wildcard $(KERNEL_INCLUDE)/linux/pfkeyv2.h))
-  SUBDIRS=libipsec setkey
-  LDLIBS+=-Llibipsec -lipsec
-  IPSECDEF=-DDO_IPSEC -Ilibipsec
-endif
 
 
 #options if you compile with libc5, and without a bind>=4.9.4 libresolv
@@ -31,13 +25,13 @@
 # What a pity, all new gccs are buggy and -Werror does not work. Sigh.
 #CCOPT=-D_GNU_SOURCE -O2 -Wstrict-prototypes -Wall -g -Werror
 CCOPT=-D_GNU_SOURCE -O2 -Wstrict-prototypes -Wall -g
-CFLAGS=$(CCOPT) $(GLIBCFIX) -I$(KERNEL_INCLUDE) -I../include $(IPSECDEF) $(DEFINES) 
+CFLAGS=$(CCOPT) $(GLIBCFIX) -I../include $(DEFINES) 
 
 IPV4_TARGETS=tracepath ping clockdiff rdisc arping tftpd rarpd
 IPV6_TARGETS=tracepath6 traceroute6 ping6
 TARGETS=$(IPV4_TARGETS) $(IPV6_TARGETS)
 
-all: check-kernel subdirs $(TARGETS)
+all: $(TARGETS)
 
 
 tftpd: tftpd.o tftpsubs.o
@@ -51,27 +45,6 @@
 rdisc_srv.o: rdisc.c
 	$(CC) $(CFLAGS) -DRDISC_SERVER -o rdisc_srv.o rdisc.c
 
-check-kernel:
-ifeq ($(KERNEL_INCLUDE),)
-	@echo "Please, set correct KERNEL_INCLUDE"; false
-else
-	@set -e; \
-	if [ ! -r $(KERNEL_INCLUDE)/linux/autoconf.h ]; then \
-		echo "Please, set correct KERNEL_INCLUDE"; false; fi
-endif
-
-subdirs:
-ifneq ($(SUBDIRS),)
-	@set -e; \
-	for i in $(SUBDIRS); \
-	do $(MAKE) -C $$i; done; \
-	cd racoon; ./configure; make
-endif
-
-
-modules: check-kernel
-	$(MAKE) KERNEL_INCLUDE=$(KERNEL_INCLUDE) -C Modules
-
 man:
 	$(MAKE) -C doc man
 
